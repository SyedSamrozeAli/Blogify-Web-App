<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include("../partials/head.ejs") %>
  </head>
  <body>
    <div class="bcontainer">
      <%- include("../sidebar.ejs") %>
      <div class="content">
        <h1>Create Blog</h1>
        <% if(locals.sucessMsg || locals.duplicateErrMsg){ %>
        <div id="myModal" class="modal">
          <div class="modal-content">
            <span class="close">&times;</span>
            <p><%= locals.sucessMsg %></p>
            <p><%= locals.duplicateErrMsg %></p>
          </div>
        </div>
        <% } %> <% const url=`/dashboard/create-post/:${cuser.username}`; %>
        <form action="<%=url %>" method="POST">
          <label for="title">Title</label>
          <input
            type="title"
            name="title"
            id="title"
            class="entries"
            required
          />

          <label for="content">Content</label>
          <textarea name="content" id="contentArea"></textarea>

          <input type="submit" value="Submit" class="button" />
        </form>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        CKEDITOR.replace("contentArea");

        // Get the modal
        var modal = document.getElementById("myModal");

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        if (modal && span) {
          // When the user clicks on <span> (x), close the modal
          span.onclick = function () {
            modal.style.display = "none";
          };

          // When the user clicks anywhere outside of the modal, close it
          window.onclick = function (event) {
            if (event.target == modal) {
              modal.style.display = "none";
            }
          };
        }
      });
    </script>
  </body>
</html>
